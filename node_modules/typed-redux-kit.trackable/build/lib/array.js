import { Trackable, isTrackable, initializeValue, setParentIfTrackable, } from './trackable';
import { getEntries } from './util';
let OBSERVABLE_ARRAY_BUFFER_SIZE = 0;
export const TrackableArray = (iterable) => {
    const record = new TrackableArrayClass(iterable);
    return record;
};
export class TrackableArrayClass extends Trackable {
    constructor(iterable) {
        super();
        if (iterable && iterable[Symbol.iterator]) {
            this.internalArray = [];
            let index = 0;
            for (let value of iterable) {
                value = initializeValue(value, this);
                this.internalArray.push(value);
                index++;
            }
            this.reserveArrayBufferOnDemand();
        }
        else {
            this.internalArray = [];
        }
    }
    get length() {
        return this.internalArray.length;
    }
    [Symbol.iterator]() {
        const entries = getEntries(this.internalArray);
        return entries[Symbol.iterator]();
    }
    /**
     * Modifier
     */
    set(index, newValue) {
        const previousValue = this.internalArray[index];
        if (previousValue !== newValue) {
            this.markAsChanged();
            this.internalArray[index] = newValue;
            setParentIfTrackable(newValue, this);
            this.reserveArrayBufferOnDemand();
        }
        return this;
    }
    push(...newValues) {
        if (newValues.length > 0) {
            this.internalArray.push(...newValues);
            this.markAsChanged();
            for (const newValue of newValues) {
                setParentIfTrackable(newValue, this);
            }
            this.reserveArrayBufferOnDemand();
        }
        return this.internalArray.length;
    }
    pop() {
        let value;
        if (this.internalArray.length > 0) {
            value = this.internalArray.pop();
            this.markAsChanged();
            this.reserveArrayBufferOnDemand();
        }
        return value;
    }
    unshift(...newValues) {
        if (newValues.length > 0) {
            this.internalArray.unshift(...newValues);
            this.markAsChanged();
            for (const newValue of newValues) {
                setParentIfTrackable(newValue, this);
            }
            this.reserveArrayBufferOnDemand();
        }
        return this.internalArray.length;
    }
    shift() {
        let value;
        if (this.internalArray.length > 0) {
            value = this.internalArray.shift();
            this.markAsChanged();
            this.reserveArrayBufferOnDemand();
        }
        return value;
    }
    splice(start, deleteCount, ...items) {
        for (const item of items) {
            setParentIfTrackable(item, this);
        }
        const deleted = this.internalArray.splice(start, deleteCount, ...items);
        if (deleteCount > 0 || items.length > 0) {
            this.markAsChanged();
            this.reserveArrayBufferOnDemand();
        }
        return deleted;
    }
    copyWithin(target, start, end) {
        if (target !== 0 || start !== 0) {
            this.internalArray.copyWithin(target, start, end);
            this.markAsChanged();
        }
        return this;
    }
    fill(value, start, end) {
        if (this.internalArray.length > 0) {
            setParentIfTrackable(value, this);
            this.internalArray.fill(value, start, end);
            this.markAsChanged();
        }
        return this;
    }
    reverse() {
        if (this.internalArray.length > 0) {
            this.internalArray.reverse();
            this.markAsChanged();
        }
        return this;
    }
    sort(compare) {
        if (this.internalArray.length > 0) {
            this.internalArray.sort(compare);
            this.markAsChanged();
        }
        return this;
    }
    /**
     * Selectors
     */
    get(index, defaultValue) {
        if (this.internalArray[index] === undefined)
            return defaultValue;
        return this.internalArray[index];
    }
    slice(start, end) {
        return this.internalArray.slice(start, end);
    }
    concat(...arrays) {
        return this.internalArray.concat(...arrays.map((array) => array.$trackable
            ? array.slice()
            : array));
    }
    entries() {
        return this.internalArray.entries();
    }
    every(callback, thisArg) {
        return this.internalArray.every(callback, thisArg);
    }
    filter(callback, thisArg) {
        return this.internalArray.filter(callback, thisArg);
    }
    find(predicate, thisArg) {
        return this.internalArray.find(predicate, thisArg);
    }
    findIndex(predicate, thisArg) {
        return this.internalArray.findIndex(predicate, thisArg);
    }
    includes(searchElement, fromIndex) {
        return this.internalArray.includes(searchElement, fromIndex);
    }
    indexOf(searchElement, fromIndex) {
        return this.internalArray.indexOf(searchElement, fromIndex);
    }
    join(seperator) {
        return this.internalArray.join(seperator);
    }
    keys() {
        return this.internalArray.keys();
    }
    lastIndexOf(searchElement, fromIndex) {
        return this.internalArray.lastIndexOf(searchElement, fromIndex);
    }
    map(callback, thisArg) {
        return this.internalArray.map(callback, thisArg);
    }
    reduce(callback, initialValue) {
        return this.internalArray.reduce(callback, initialValue);
    }
    reduceRight(callback, initialValue) {
        return this.internalArray.reduceRight(callback, initialValue);
    }
    some(callback, thisArg) {
        return this.internalArray.some(callback, thisArg);
    }
    toLocaleString() {
        return this.internalArray.toLocaleString();
    }
    toString() {
        return this.internalArray.toString();
    }
    values() {
        return this.internalArray.values();
    }
    /**
     * Trackable Specifics
     */
    onChildChange(child) {
        this.markAsChanged();
    }
    clone() {
        return TrackableArray(this.internalArray);
    }
    toJS(shallow = false) {
        const pureArray = [];
        for (let [index, value] of this) {
            value = !shallow && isTrackable(value)
                ? value.toJS()
                : value;
            pureArray.push(value);
        }
        return pureArray;
    }
    reserveArrayBufferOnDemand() {
        if (this.internalArray.length > OBSERVABLE_ARRAY_BUFFER_SIZE) {
            reserveArrayBuffer(this.internalArray.length);
        }
    }
}
function createArrayBufferItem(index) {
    Object.defineProperty(TrackableArrayClass.prototype, '' + index, {
        enumerable: false,
        configurable: false,
        get() {
            return this.get(index);
        },
        set(value) {
            this.set(index, value);
        },
    });
}
function reserveArrayBuffer(max) {
    for (let index = OBSERVABLE_ARRAY_BUFFER_SIZE; index < max; index++) {
        createArrayBufferItem(index);
    }
    OBSERVABLE_ARRAY_BUFFER_SIZE = max;
}
reserveArrayBuffer(1000);
export default TrackableArray;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJyYXkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbGliL2FycmF5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsV0FBVyxFQUNYLGVBQWUsRUFDZixvQkFBb0IsR0FDckIsTUFBTSxhQUFhLENBQUE7QUFDcEIsT0FBTyxFQUNMLFVBQVUsRUFDWCxNQUFNLFFBQVEsQ0FBQTtBQUVmLElBQUksNEJBQTRCLEdBQUcsQ0FBQyxDQUFBO0FBR3BDLE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBRyxDQUFJLFFBQXNCO0lBQ3RELE1BQU0sTUFBTSxHQUFHLElBQUksbUJBQW1CLENBQUMsUUFBUSxDQUFDLENBQUE7SUFDaEQsTUFBTSxDQUFDLE1BQTJCLENBQUE7QUFDcEMsQ0FBQyxDQUFBO0FBRUQsTUFBTSwwQkFBOEIsU0FBUSxTQUFpQztJQU8zRSxZQUFhLFFBQXNCO1FBQ2pDLEtBQUssRUFBRSxDQUFBO1FBQ1AsRUFBRSxDQUFDLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFDLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBUyxDQUFBO1lBQzlCLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQTtZQUNiLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQzNCLEtBQUssR0FBRyxlQUFlLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO2dCQUNwQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtnQkFDOUIsS0FBSyxFQUFFLENBQUE7WUFDVCxDQUFDO1lBQ0QsSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUE7UUFDbkMsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUE7UUFDekIsQ0FBQztJ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