export const isTrackable = (maybeTrackable) => {
    if (maybeTrackable == null)
        return false;
    return !!maybeTrackable.$trackable;
};
export const setParentIfTrackable = (maybeTrackable, parent) => {
    if (isTrackable(maybeTrackable)) {
        maybeTrackable.setParent(parent);
    }
};
export const initializeValue = (maybeTrackable, parent) => {
    if (isTrackable(maybeTrackable)) {
        if (maybeTrackable.$trackable.isChanged) {
            maybeTrackable = maybeTrackable.clone();
        }
        maybeTrackable.setParent(parent);
    }
    return maybeTrackable;
};
export class Trackable {
    constructor() {
        this.$trackable = {
            isChanged: false,
            shallow: false,
        };
    }
    markAsChanged() {
        this.$trackable.isChanged = true;
        if (this.$trackable.parent) {
            this.$trackable.parent.onChildChange(this);
        }
    }
    setParent(parent) {
        this.$trackable.parent = parent;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhY2thYmxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi90cmFja2FibGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBTUEsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFHLENBQUMsY0FBbUI7SUFDN0MsRUFBRSxDQUFDLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQztRQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUE7SUFDeEMsTUFBTSxDQUFDLENBQUMsQ0FBRSxjQUFpQyxDQUFDLFVBQVUsQ0FBQTtBQUN4RCxDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsTUFBTSxvQkFBb0IsR0FBRyxDQUFDLGNBQW1CLEVBQUUsTUFBc0I7SUFDOUUsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvQixjQUFpQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUN0RCxDQUFDO0FBQ0gsQ0FBQyxDQUFBO0FBRUQsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFHLENBQUksY0FBaUIsRUFBRSxNQUFzQjtJQUMxRSxFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hDLEVBQUUsQ0FBQyxDQUFFLGNBQXdDLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDbkUsY0FBYyxHQUFJLGNBQXdDLENBQUMsS0FBSyxFQUFFLENBQUE7UUFDcEUsQ0FBQztRQUNBLGNBQXdDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQzdELENBQUM7SUFDRCxNQUFNLENBQUMsY0FBYyxDQUFBO0FBQ3ZCLENBQUMsQ0FBQTtBQUVELE1BQU07SUFBTjtRQUNTLGVBQVUsR0FBd0I7WUFDdkMsU0FBUyxFQUFFLEtBQUs7WUFDaEIsT0FBTyxFQUFFLEtBQUs7U0FDZixDQUFBO0lBaUJILENBQUM7SUFYUSxhQUFhO1FBQ2xCLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQTtRQUVoQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDM0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQzVDLENBQUM7SUFDSCxDQUFDO0lBRU0sU0FBUyxDQUFFLE1BQXNCO1FBQ3RDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtJQUNqQyxDQUFDO0NBQ0YifQ==