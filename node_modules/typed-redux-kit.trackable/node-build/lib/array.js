"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const trackable_1 = require("./trackable");
const util_1 = require("./util");
let OBSERVABLE_ARRAY_BUFFER_SIZE = 0;
exports.TrackableArray = (iterable) => {
    const record = new TrackableArrayClass(iterable);
    return record;
};
class TrackableArrayClass extends trackable_1.Trackable {
    constructor(iterable) {
        super();
        if (iterable && iterable[Symbol.iterator]) {
            this.internalArray = [];
            let index = 0;
            for (let value of iterable) {
                value = trackable_1.initializeValue(value, this);
                this.internalArray.push(value);
                index++;
            }
            this.reserveArrayBufferOnDemand();
        }
        else {
            this.internalArray = [];
        }
    }
    get length() {
        return this.internalArray.length;
    }
    [Symbol.iterator]() {
        const entries = util_1.getEntries(this.internalArray);
        return entries[Symbol.iterator]();
    }
    /**
     * Modifier
     */
    set(index, newValue) {
        const previousValue = this.internalArray[index];
        if (previousValue !== newValue) {
            this.markAsChanged();
            this.internalArray[index] = newValue;
            trackable_1.setParentIfTrackable(newValue, this);
            this.reserveArrayBufferOnDemand();
        }
        return this;
    }
    push(...newValues) {
        if (newValues.length > 0) {
            this.internalArray.push(...newValues);
            this.markAsChanged();
            for (const newValue of newValues) {
                trackable_1.setParentIfTrackable(newValue, this);
            }
            this.reserveArrayBufferOnDemand();
        }
        return this.internalArray.length;
    }
    pop() {
        let value;
        if (this.internalArray.length > 0) {
            value = this.internalArray.pop();
            this.markAsChanged();
            this.reserveArrayBufferOnDemand();
        }
        return value;
    }
    unshift(...newValues) {
        if (newValues.length > 0) {
            this.internalArray.unshift(...newValues);
            this.markAsChanged();
            for (const newValue of newValues) {
                trackable_1.setParentIfTrackable(newValue, this);
            }
            this.reserveArrayBufferOnDemand();
        }
        return this.internalArray.length;
    }
    shift() {
        let value;
        if (this.internalArray.length > 0) {
            value = this.internalArray.shift();
            this.markAsChanged();
            this.reserveArrayBufferOnDemand();
        }
        return value;
    }
    splice(start, deleteCount, ...items) {
        for (const item of items) {
            trackable_1.setParentIfTrackable(item, this);
        }
        const deleted = this.internalArray.splice(start, deleteCount, ...items);
        if (deleteCount > 0 || items.length > 0) {
            this.markAsChanged();
            this.reserveArrayBufferOnDemand();
        }
        return deleted;
    }
    copyWithin(target, start, end) {
        if (target !== 0 || start !== 0) {
            this.internalArray.copyWithin(target, start, end);
            this.markAsChanged();
        }
        return this;
    }
    fill(value, start, end) {
        if (this.internalArray.length > 0) {
            trackable_1.setParentIfTrackable(value, this);
            this.internalArray.fill(value, start, end);
            this.markAsChanged();
        }
        return this;
    }
    reverse() {
        if (this.internalArray.length > 0) {
            this.internalArray.reverse();
            this.markAsChanged();
        }
        return this;
    }
    sort(compare) {
        if (this.internalArray.length > 0) {
            this.internalArray.sort(compare);
            this.markAsChanged();
        }
        return this;
    }
    /**
     * Selectors
     */
    get(index, defaultValue) {
        if (this.internalArray[index] === undefined)
            return defaultValue;
        return this.internalArray[index];
    }
    slice(start, end) {
        return this.internalArray.slice(start, end);
    }
    concat(...arrays) {
        return this.internalArray.concat(...arrays.map((array) => array.$trackable
            ? array.slice()
            : array));
    }
    entries() {
        return this.internalArray.entries();
    }
    every(callback, thisArg) {
        return this.internalArray.every(callback, thisArg);
    }
    filter(callback, thisArg) {
        return this.internalArray.filter(callback, thisArg);
    }
    find(predicate, thisArg) {
        return this.internalArray.find(predicate, thisArg);
    }
    findIndex(predicate, thisArg) {
        return this.internalArray.findIndex(predicate, thisArg);
    }
    includes(searchElement, fromIndex) {
        return this.internalArray.includes(searchElement, fromIndex);
    }
    indexOf(searchElement, fromIndex) {
        return this.internalArray.indexOf(searchElement, fromIndex);
    }
    join(seperator) {
        return this.internalArray.join(seperator);
    }
    keys() {
        return this.internalArray.keys();
    }
    lastIndexOf(searchElement, fromIndex) {
        return this.internalArray.lastIndexOf(searchElement, fromIndex);
    }
    map(callback, thisArg) {
        return this.internalArray.map(callback, thisArg);
    }
    reduce(callback, initialValue) {
        return this.internalArray.reduce(callback, initialValue);
    }
    reduceRight(callback, initialValue) {
        return this.internalArray.reduceRight(callback, initialValue);
    }
    some(callback, thisArg) {
        return this.internalArray.some(callback, thisArg);
    }
    toLocaleString() {
        return this.internalArray.toLocaleString();
    }
    toString() {
        return this.internalArray.toString();
    }
    values() {
        return this.internalArray.values();
    }
    /**
     * Trackable Specifics
     */
    onChildChange(child) {
        this.markAsChanged();
    }
    clone() {
        return exports.TrackableArray(this.internalArray);
    }
    toJS(shallow = false) {
        const pureArray = [];
        for (let [index, value] of this) {
            value = !shallow && trackable_1.isTrackable(value)
                ? value.toJS()
                : value;
            pureArray.push(value);
        }
        return pureArray;
    }
    reserveArrayBufferOnDemand() {
        if (this.internalArray.length > OBSERVABLE_ARRAY_BUFFER_SIZE) {
            reserveArrayBuffer(this.internalArray.length);
        }
    }
}
exports.TrackableArrayClass = TrackableArrayClass;
function createArrayBufferItem(index) {
    Object.defineProperty(TrackableArrayClass.prototype, '' + index, {
        enumerable: false,
        configurable: false,
        get() {
            return this.get(index);
        },
        set(value) {
            this.set(index, value);
        },
    });
}
function reserveArrayBuffer(max) {
    for (let index = OBSERVABLE_ARRAY_BUFFER_SIZE; index < max; index++) {
        createArrayBufferItem(index);
    }
    OBSERVABLE_ARRAY_BUFFER_SIZE = max;
}
reserveArrayBuffer(1000);
exports.default = exports.TrackableArray;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJyYXkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbGliL2FycmF5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMkNBS29CO0FBQ3BCLGlDQUVlO0FBRWYsSUFBSSw0QkFBNEIsR0FBRyxDQUFDLENBQUE7QUFHdkIsUUFBQSxjQUFjLEdBQUcsQ0FBSSxRQUFzQjtJQUN0RCxNQUFNLE1BQU0sR0FBRyxJQUFJLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQ2hELE1BQU0sQ0FBQyxNQUEyQixDQUFBO0FBQ3BDLENBQUMsQ0FBQTtBQUVELHlCQUFvQyxTQUFRLHFCQUFpQztJQU8zRSxZQUFhLFFBQXNCO1FBQ2pDLEtBQUssRUFBRSxDQUFBO1FBQ1AsRUFBRSxDQUFDLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFDLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBUyxDQUFBO1lBQzlCLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQTtZQUNiLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQzNCLEtBQUssR0FBRywyQkFBZSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtnQkFDcEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7Z0JBQzlCLEtBQUssRUFBRSxDQUFBO1lBQ1QsQ0FBQztZQUNELElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFBO1FBQ25DLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFBO1FBQ3pCLENBQUM7SUFDSCxDQUFDO0lBbEJELElBQVcsTUFBTTtRQUNmLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQTtJQUNsQyxDQUFDO0lBa0JNLENBQUMsTUFBTSxDQUFD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