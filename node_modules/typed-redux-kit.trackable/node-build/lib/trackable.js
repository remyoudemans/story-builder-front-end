"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isTrackable = (maybeTrackable) => {
    if (maybeTrackable == null)
        return false;
    return !!maybeTrackable.$trackable;
};
exports.setParentIfTrackable = (maybeTrackable, parent) => {
    if (exports.isTrackable(maybeTrackable)) {
        maybeTrackable.setParent(parent);
    }
};
exports.initializeValue = (maybeTrackable, parent) => {
    if (exports.isTrackable(maybeTrackable)) {
        if (maybeTrackable.$trackable.isChanged) {
            maybeTrackable = maybeTrackable.clone();
        }
        maybeTrackable.setParent(parent);
    }
    return maybeTrackable;
};
class Trackable {
    constructor() {
        this.$trackable = {
            isChanged: false,
            shallow: false,
        };
    }
    markAsChanged() {
        this.$trackable.isChanged = true;
        if (this.$trackable.parent) {
            this.$trackable.parent.onChildChange(this);
        }
    }
    setParent(parent) {
        this.$trackable.parent = parent;
    }
}
exports.Trackable = Trackable;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhY2thYmxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi90cmFja2FibGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFNYSxRQUFBLFdBQVcsR0FBRyxDQUFDLGNBQW1CO0lBQzdDLEVBQUUsQ0FBQyxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUM7UUFBQyxNQUFNLENBQUMsS0FBSyxDQUFBO0lBQ3hDLE1BQU0sQ0FBQyxDQUFDLENBQUUsY0FBaUMsQ0FBQyxVQUFVLENBQUE7QUFDeEQsQ0FBQyxDQUFBO0FBRVksUUFBQSxvQkFBb0IsR0FBRyxDQUFDLGNBQW1CLEVBQUUsTUFBc0I7SUFDOUUsRUFBRSxDQUFDLENBQUMsbUJBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0IsY0FBaUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDdEQsQ0FBQztBQUNILENBQUMsQ0FBQTtBQUVZLFFBQUEsZUFBZSxHQUFHLENBQUksY0FBaUIsRUFBRSxNQUFzQjtJQUMxRSxFQUFFLENBQUMsQ0FBQyxtQkFBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoQyxFQUFFLENBQUMsQ0FBRSxjQUF3QyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ25FLGNBQWMsR0FBSSxjQUF3QyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ3BFLENBQUM7UUFDQSxjQUF3QyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUM3RCxDQUFDO0lBQ0QsTUFBTSxDQUFDLGNBQWMsQ0FBQTtBQUN2QixDQUFDLENBQUE7QUFFRDtJQUFBO1FBQ1MsZUFBVSxHQUF3QjtZQUN2QyxTQUFTLEVBQUUsS0FBSztZQUNoQixPQUFPLEVBQUUsS0FBSztTQUNmLENBQUE7SUFpQkgsQ0FBQztJQVhRLGFBQWE7UUFDbEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFBO1FBRWhDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUMzQixJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDNUMsQ0FBQztJQUNILENBQUM7SUFFTSxTQUFTLENBQUUsTUFBc0I7UUFDdEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO0lBQ2pDLENBQUM7Q0FDRjtBQXJCRCw4QkFxQkMifQ==